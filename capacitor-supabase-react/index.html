<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Capacitor + Supabase + Social Auth + React In-AppÂ  - Chris Weed</title><meta name="description" content="Building off the Capacitor + React authentication tutorial, we are now using an in-app experience for the authentication."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="stylesheet" href="https://cjweed.com/media/plugins/syntaxHighlighter/prism-black.css"><link rel="stylesheet" href="https://cjweed.com/media/plugins/syntaxHighlighter/prism-inline-color.css"><link rel="canonical" href="https://cjweed.com/capacitor-supabase-react/"><link rel="alternate" type="application/atom+xml" href="https://cjweed.com/feed.xml" title="Chris Weed - RSS"><link rel="alternate" type="application/json" href="https://cjweed.com/feed.json" title="Chris Weed - JSON"><meta property="og:title" content="Capacitor + Supabase + Social Auth + React In-AppÂ "><meta property="og:image" content="https://cjweed.com/media/posts/13/AllTheThings.png"><meta property="og:image:width" content="800"><meta property="og:image:height" content="344"><meta property="og:site_name" content="Chris Weed"><meta property="og:description" content="Building off the Capacitor + React authentication tutorial, we are now using an in-app experience for the authentication."><meta property="og:url" content="https://cjweed.com/capacitor-supabase-react/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://cjweed.com/media/website/apple-touch-icon.png" type="image/x-icon"><link rel="stylesheet" href="https://cjweed.com/assets/css/style.css?v=56d00dfbc62422fb0451bcb245447fcc"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://cjweed.com/capacitor-supabase-react/"},"headline":"Capacitor + Supabase + Social Auth + React In-AppÂ ","datePublished":"2025-03-06T16:40-06:00","dateModified":"2026-02-08T11:39-06:00","image":{"@type":"ImageObject","url":"https://cjweed.com/media/posts/13/AllTheThings.png","height":344,"width":800},"description":"Building off the Capacitor + React authentication tutorial, we are now using an in-app experience for the authentication.","author":{"@type":"Person","name":"Chris","url":"https://cjweed.com/authors/chris/"},"publisher":{"@type":"Organization","name":"Chris"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><header class="top js-header"><a class="logo" href="https://cjweed.com/">Chris Weed</a></header><main class="post"><article class="content"><div class="hero"><header class="hero__content hero__content--centered"><div class="wrapper"><h1>Capacitor + Supabase + Social Auth + React In-AppÂ </h1></div></header><figure class="hero__image"><div class="hero__image-wrapper"><img src="https://cjweed.com/media/posts/13/AllTheThings.png" srcset="https://cjweed.com/media/posts/13/responsive/AllTheThings-xs.png 640w, https://cjweed.com/media/posts/13/responsive/AllTheThings-sm.png 768w, https://cjweed.com/media/posts/13/responsive/AllTheThings-md.png 1024w, https://cjweed.com/media/posts/13/responsive/AllTheThings-lg.png 1366w, https://cjweed.com/media/posts/13/responsive/AllTheThings-xl.png 1600w, https://cjweed.com/media/posts/13/responsive/AllTheThings-2xl.png 1920w" sizes="88vw" loading="eager" height="344" width="800" alt="Supabase, Capacitor, Google and Safari logos"></div><figcaption>Added in-browser handling of the authentication</figcaption></figure></div><div class="entry-wrapper content__entry"><p><strong>UPDATE: Feb 2026</strong>Â - Since Capacitor is basically being abandoned by Ionic (they were bought out) you are better off usingÂ <a href="https://capgo.app/docs/plugins/social-login/supabase/google/ios/">https://capgo.app/docs/plugins/social-login/supabase/google/ios/</a>. Capgo seems to have picked up the slack that the Ionic team left and has created plugins that actually work with the latest version.Â  Bonus they even have "Capacitor+" which is a drop-in replacement.Â  So just use that!</p><p>--- Original post ---</p><p>In my <a href="https://cjweed.com/capacitor-supabase-social-auth-react/">previous, extremely long tutorial</a> post I walked you through how to get a simple React app to use Supabase Social authentication to work within a Capacitor app. Phew that was a lot of name dropping sorry.</p><p>This post will be much much shorter, the goal in this second part is to explain how to extend upon the work we previously did to use the in-app browser experience. The in-app browser the best way to use the social logins as it gives the "normal" experience users expect when logging in this way but more critically it does not depend on the users default browser.</p><h2>Setup</h2><p>If you followed along with the <a href="https://cjweed.com/capacitor-supabase-social-auth-react/">previous post</a> you should have a reasonably working native application that can use Google auth flow to authenticate with Supabase. Once you have that working (be sure to have Safari as your default browser) you should be able to get started here.</p><figure><figure class="post__image"><img loading="lazy" src="https://cjweed.com/media/posts/13/app-starting-point.gif" alt="A native app authenticating with Google and redirecting back to the app." width="320" height="619"></figure><figcaption>A good start but depends on the default browser which can be problematic</figcaption></figure><p>The three problems we have:</p><ol><li>It depends on the current default browser, this could be something like Brave or Orion which do not support deep links (at least as of this writing and in this situation)</li><li>It doesn't feel "normal" for a user using your native app to bounce out of the app for authentication.</li><li>The page that you authenticated with remains there in the browser, the user might get confused or just feel your app is sloppy when it leaves a trail like that.</li></ol><h2>Prevent Redirect</h2><p>The first thing we need to do is stop Supabase from automatically launching the browser when running the sign in code.Â  Let's do this by adding the <a href="https://supabase.com/docs/reference/javascript/auth-signinwithotp" target="_blank" rel="noopener noreferrer">lightly documented</a> prop called <code>skipBrowserRedirect</code> to the <code>signInWithOauth</code> call</p><p class="filename">components/LoginComponent.tsx</p><pre class="language-javascript line-numbers"><code>const login = () =&gt; {
  supabase.auth.signInWithOAuth({
    provider: 'google',
    options: {
      redirectTo: `${baseUrl}/logged`,
+     // Skip the Browser Redirect to manually open the browser
+     skipBrowserRedirect: true,
      queryParams: {
        access_type: 'offline',
        prompt: 'consent',
      },
    },
  })
}</code></pre><div><p>With that addition we no longer automatically launch the browser when the user attempts to log in with this method. We have to do that manually now, but because we do it manually we have some control on how we launch that browser.</p><p>And with that we can now use the "in app browser".</p><h2>In App Browser</h2><p>The In-App Browser uses the built in browser engine of the devices which means it's consistent regardless of what other browser is set as the default. This also helps us use things we are know supported by these browsers, in this case Deep Linking.</p><p>To open an in-app browser in Capacitor we will use the documentation they have provided: <a href="https://capacitorjs.com/docs/apis/browser" target="_blank" rel="noopener noreferrer">https://capacitorjs.com/docs/apis/browser</a>. Notice that this <span style="text-decoration: underline;">isn't</span> the seemingly better named "<a href="https://capacitorjs.com/docs/apis/inappbrowser" target="_blank" rel="noopener noreferrer">in app</a>" browser version ðŸ¤·.</p><pre class="language-bash line-numbers"><code>pnpm i @capactior/browser</code></pre><p>And let's create a new component to handle the details of this browser experience. Notice that we are no longer just writing code for a web app, we are now leaning into some of the nice things that Capacitor gives us and is able to adapt automatically based on the environment it lives in.</p><p>nativeBrowser.ts</p><pre class="language-typescript line-numbers"><code>import { Capacitor } from '@capacitor/core'
import { Browser } from '@capacitor/browser'

export const openBrowser = async (url: string) =&gt; {
  // Open the browser only if we are on a native platform (in-app)
  if (Capacitor.isNativePlatform()) {
    await Browser.open({
      url,
      presentationStyle: 'popover',
    })
  } else {
    window.location.href = url
  }
}

export const closeBrowser = async () =&gt; {
  if (Capacitor.isNativePlatform()) {
    await Browser.close()
  }
}
</code></pre><p>Notice how we have to check if we are in a native platform or web. If we are in a native environment we want to trigger this new Browser.open function call so we can designate how that experience should look.</p><p>Now back at our LoginComponent we want to trigger the openBrowser function call manually to get the authentication flow kicked off.</p><p class="filename">components/LoginComponent.tsx</p><pre class="language-typescript line-numbers"><code>  const login = async () =&gt; {
+   const { data, error } = await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: {
        redirectTo: `${baseUrl}/logged`,
        // Skip the Browser Redirect to manually open the browser
        skipBrowserRedirect: true,
        queryParams: {
          access_type: 'offline',
          prompt: 'consent',
        },
      },
    })

+   if (error) {
+     console.error(error)
+     return
+   }

+   await openBrowser(data.url)
  }</code></pre><p>Obviously we could do something different with the error handling, but for now this is an example. The key is that we manually open the browser now and depending if we are in a native environment or standard browser we handle it slightly differently.</p><p>If you attempt to use the app now you'll notice that the in-app browser works and it looks nice except it sticks open.Â  So close!</p><figure><figure class="post__image"><img loading="lazy" src="https://cjweed.com/media/posts/13/out-2025-03-11_20-44-14.gif" alt="Logging in with Google authentication but the browser window stays open" width="400" height="774"></figure><figcaption>The browser is staying open, you need to manually close it.</figcaption></figure><h2>Closing the Browser</h2><p>If you test this out now you'll notice that the browser just hangs open after you authenticate. Luckily we have a function (we already wrote) to close that browser and thus we just need to call that on the redirect page we built in the first post.</p><p>We know that we are redirected to the <code>/logged</code> page when we authenticate, so we could brute force the browser closed by saying 'when that page is loaded, close the external browser if there is one'. That could be done with code like this:</p><p class="filename">components/LoggedIn.tsx</p><pre class="language-typescript line-numbers"><code>+ import { closeBrowser } from '../nativeBrowser'

export const LoggedIn = () =&gt; {
  const history = useHistory()
  const { supabase } = useSupabase()

+  useEffect(() =&gt; {
+    closeBrowser().catch(() =&gt; {
+      // nom nom nom
+    })
+  }, [])

....
// rest of the component</code></pre><p>This would simply close the browser when this component is rendered. This would of course be kind of poor form if we wanted to use this page for anything else or if we landed on this page not from the result of logging in.</p><p>So a better way to handle this would be to move that logic to the SupabaseProvider we've created in the previous post. Here we can listen for authentication state changes and do some logic based on the "logged in" state.</p><p class="filename">components/SupabaseProvider.tsx</p><pre class="language-typescript line-numbers"><code>export const SupabaseProvider: FC&lt;SupabaseProviderProps&gt; = ({ children }) =&gt; {
  const [supabase] = useState&lt;SupabaseClient&gt;(() =&gt;
    createClient(supabaseUrl, supabaseKey),
  )

+  useEffect(() =&gt; {
+    const { data: authListener } = supabase.auth.onAuthStateChange(
+      (event, session) =&gt; {
+        if (event === 'SIGNED_IN' &amp;&amp; session?.user) {
+          closeBrowser().catch(() =&gt; {
+            // nom nom nom
+          })
+        }
+      },
+    )

+    // Cleanup the listener on unmount
+    return () =&gt; {
+      authListener?.subscription.unsubscribe()
+    }
+ }, [])

...// The rest of the component</code></pre><p>This will listen for the events emitted from the supabase auth and do logic based on that. In our case we simply want to close the browser but you could also expand this to saving the user you get back.</p><p>If you use the SupabaseProvider change make sure to remove the LoggedIn.tsx change.</p><p>Congrats you can now test the application login and it'll have the standard in-app browser experience that users are expecting.</p><figure><figure class="post__image"><img loading="lazy" src="https://cjweed.com/media/posts/13/out-2025-03-11_21-10-00.gif" alt="Logging into a native application with Google and the in-app browser closes" width="400" height="774"></figure><figcaption>The in-app browser now closes automatically when we log in</figcaption></figure><h2>Conclusion</h2><p>Congrats on getting this far! The goal of this post was to make the example app a bit more "natural" feeling but unfortunately it required the first step of "if native do X" type of checking.</p><p>I like to try and keep the code I write the same across all devices, similar to not having to use specific CSS selectors or other varieties of things that are browser specific in web development. This is a nessissary evil and by abstracting it away into the <code>nativeBrowser.tsx</code> component it's at least nicer to look at and use across the app.</p><p>This only leaves one last downfall:</p><ul><li>You must use the "consent" variety of authentication.</li></ul><p>I haven't yet seen the auth flow work properly even in the in-app experience if you don't use the consent flow (slower, more windows for people to click through). Maybe in the future I'll add yet more native-specific code so we can skip those screens. For now this is good enough for me and doesn't feel too janky to the user.</p></div></div><footer class="content__footer"><div class="entry-wrapper"><div class="content__actions"><ul class="content__tag"><li><a href="https://cjweed.com/tags/learning/">learning</a></li><li><a href="https://cjweed.com/tags/tutorial/">tutorial</a></li><li><a href="https://cjweed.com/tags/web/">web</a></li></ul></div></div><nav class="content__nav"><div class="wrapper"><div class="content__nav-inner"><div class="content__nav-prev"><a href="https://cjweed.com/capacitor-supabase-social-auth-react/" class="content__nav-link" rel="prev"><figure class="content__nav-image"><img src="https://cjweed.com/media/posts/3/responsive/Supa-xs.png" class="lazyload" loading="lazy" alt="Supabase, Capacitor, Google Logos" height="600" width="600"></figure><div><span>Previous</span> Capacitor + Supabase + Social Auth + React</div></a></div></div></div></nav></footer></article></main><footer class="footer"><div class="wrapper"><div class="footer__copyright"><p>Â© 2025 - Chris Weed</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg width="20" height="20"><use xlink:href="https://cjweed.com/assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script defer="defer" src="https://cjweed.com/assets/js/scripts.min.js?v=ffcbea6c02c8178d10092962b235a5b0"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://cjweed.com/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://cjweed.com/media/plugins/syntaxHighlighter/prism-line-numbers.min.js"></script><script defer="defer" src="https://cjweed.com/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://cjweed.com/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script><script defer="defer" src="https://cjweed.com/media/plugins/syntaxHighlighter/prism-inline-color.min.js"></script></body></html>